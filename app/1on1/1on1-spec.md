# 📄 [SPEC] 1:3 개인별 맞춤 매칭 리포트 시스템

## 1. 개요
* **목적**: 참가자 개인의 사진 반응 데이터와 가치관 설문을 결합하여 최적의 대화 상대 3인을 추천.
* **타겟**: 행사 참여 유저 전체.
* **핵심 가치**: 데이터 기반의 확신 + 감성적인 톤앤매너를 통한 아이스브레이킹 유도.

---

## 2. 매칭 알고리즘 (Matching Priority)

추천 우선순위는 아래 가중치에 따라 결정됨:
1. **Mutual Match (상호 호감)**: 서로의 사진을 선택한 경우 (1순위 고정)
2. **Value Fit (가치관 일치율)**: 사전 설문 데이터의 키워드 일치 개수가 높은 순
3. **One-way Interest (단방향 호감)**: 내가 선택했거나, 나를 선택한 상대방

---

## 3. 리포트 상세 구성 (UI/UX)

### 3.1. 도입부 (Header)
* **텍스트**: `{user_name}님을 위한 세 명의 특별한 인연`
* **비주얼**: 유저 본인의 메인 피드 사진 전시 (Google Drive API 연동)

### 3.2. 파트너 카드 (3인 추천 영역)
각 카드별로 다른 페르소나와 멘트 할당:

#### [Partner 1: 가치관 최적형]
* **멘트**: "가장 추천드리는 대화 상대는 **{matching_name}**님입니다. {user_name}님과 가치관 측면에서 **{match_rate}%** 일치율을 보여요."
* **상세**: "{core_value}"를 중시하는 따뜻한 마음의 소유자 {user_name}님과 결이 비슷한 분입니다.

#### [Partner 2: 시각적 호감형]
* **멘트**: "**{matching_name}**님은 {user_name}님이 선택하신 사진의 분위기와 가장 닮은 분이에요."
* **상세**: 서로의 미소에 이끌린 두 분, 사진 너머의 더 깊은 이야기를 나눠보시는 건 어떨까요?

#### [Partner 3: 공통 관심사형]
* **멘트**: "**{matching_name}**님과는 **{common_topic}**이라는 연결고리가 있네요!"
* **상세**: 첫 대화는 두 분의 공통 관심사인 {common_topic}으로 시작해보는 걸 추천드려요.

---

## 4. 데이터베이스 및 API 설계

### 4.1. `users` 테이블 확장 필드
* `core_value` (text): 핵심 가치관 키워드
* `interests` (text[]): 관심사 리스트
* `description` (text): 유저를 수식하는 감성 키워드

### 4.2. 리포트 생성 로직 (Logic)
* `GET /api/report/[id]` 호출 시:
    1. `feed_likes`에서 상호/단방향 매칭 유저 추출.
    2. `users`에서 가치관 일치율 계산.
    3. 상위 3인을 선별하여 JSON 반환.

---

## 5. 비기능적 요구사항
* **이미지 렌더링**: Google Drive의 `drive_file_id`를 활용한 고화질 썸네일 노출.
* **공유 기능**: `html2canvas`를 이용한 리포트 이미지 저장 기능 (PNG/JPG).
* **반응형**: 모바일 웹 최적화 레이아웃 필수.

---

## 6. 톤앤매너 가이드
* 데이터는 **객관적**(숫자, %)으로 제시하되, 설명은 **주관적/감성적**으로 풀이.
* 상대방을 지칭할 때 항상 '님'을 붙이고, 긍정적인 형용사(따뜻한, 밝은, 차분한 등) 적극 활용.